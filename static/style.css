/* --- Configurações Globais e Variáveis de Tema (Minimalista & Elegante) --- */
:root {
    /* Tema Escuro (Padrão) */
    --bg-primary: #121212;
    --bg-secondary: #1e1e1e;
    --bg-tertiary: #2a2a2a;
    --body-bg: var(--bg-primary);

    --primary-accent: #007bff; /* Azul clássico e clean */
    --secondary-accent: #6c757d; /* Cinzento para detalhes */
    --warning-accent: #ffc107;

    --text-primary: #f5f5f5; /* Cinzento claro */
    --text-secondary: #b0b0b0; /* Cinzento médio para detalhes */
    --text-dark: #121212;

    --container-bg: rgba(30, 30, 30, 0.75);
    --container-border: rgba(255, 255, 255, 0.1);
    --container-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);

    --input-bg: rgba(42, 42, 42, 0.9);
    --input-border: rgba(255, 255, 255, 0.15);
    --input-focus-border: var(--primary-accent);
    --focus-glow: 0 0 0 3px rgba(0, 123, 255, 0.25);

    --success-color: #28a745;
    --error-color: #dc3545;
    --warning-color: var(--warning-accent);

    --list-item-bg: rgba(42, 42, 42, 0.8);
    --list-item-border: rgba(255, 255, 255, 0.08);
    --point-group-bg: rgba(42, 42, 42, 0.7);
    --point-group-border: rgba(255, 255, 255, 0.15);
    --point-group-hover-bg: rgba(50, 50, 50, 0.8);
    --point-text-bg: rgba(30, 30, 30, 0.8);

    --refine-controls-bg: rgba(30, 30, 30, 0.85);
    --context-info-bg: rgba(30, 30, 30, 0.8);
    --context-info-border: rgba(255, 255, 255, 0.15);

    --api-status-ok-color: var(--success-color);
    --api-status-ok-border: rgba(40, 167, 69, 0.4);
    --api-status-ok-glow: 0 0 10px rgba(40, 167, 69, 0.25);
    --api-status-error-color: var(--error-color);
    --api-status-error-border: rgba(220, 53, 69, 0.4);
    --api-status-error-glow: 0 0 10px rgba(220, 53, 69, 0.25);
    --api-status-bg: rgba(0,0,0, 0.5);

    --btn-primary-color: #ffffff;
    --btn-primary-bg: var(--primary-accent);
    --btn-primary-border: var(--primary-accent);
    --btn-primary-hover-bg: #0056b3;

    --btn-success-color: #ffffff;
    --btn-success-bg: var(--success-color);
    --btn-success-border: var(--success-color);
    --btn-success-hover-bg: #218838;

    --btn-secondary-color: var(--text-secondary);
    --btn-secondary-bg: transparent;
    --btn-secondary-border: var(--secondary-accent);
    --btn-secondary-hover-bg: rgba(108, 117, 125, 0.2);
    --btn-secondary-hover-text: var(--text-primary);

    --btn-warning-color: var(--text-dark);
    --btn-warning-bg: var(--warning-accent);
    --btn-warning-border: var(--warning-accent);
    --btn-warning-hover-bg: #e0a800;

    --btn-refine-color: var(--text-primary);
    --btn-refine-bg: rgba(108, 117, 125, 0.2);
    --btn-refine-border: rgba(108, 117, 125, 0.4);
    --btn-refine-hover-bg: rgba(108, 117, 125, 0.4);

    --btn-copy-fallback-color: #664d03;
    --btn-copy-fallback-border: #ffecb5;
    --btn-copy-fallback-bg: #fff3cd;

    --scrollbar-thumb: #555;
    --scrollbar-track: #2a2a2a;

    --modal-bg: #1e1e1e;
    --modal-header-border: #444;
    --modal-footer-border: #444;

    /* Variáveis Comuns */
    --border-radius: 8px;
    --font-family-sans-serif: 'Inter', sans-serif;
    --transition-speed: 0.3s;
}

/* Tema Claro */
body.light-mode {
    --bg-primary: #f8f9fa;
    --bg-secondary: #ffffff;
    --bg-tertiary: #e9ecef;
    --body-bg: var(--bg-primary);

    --primary-accent: #007bff;
    --secondary-accent: #6c757d;
    --warning-accent: #ffc107;

    --text-primary: #212529;
    --text-secondary: #6c757d;
    --text-dark: #ffffff;

    --container-bg: #ffffff;
    --container-border: #e9ecef;
    --container-shadow: 0 6px 20px rgba(0, 0, 0, 0.08);

    --input-bg: #f1f3f5;
    --input-border: #ced4da;
    --input-focus-border: var(--primary-accent);
    --focus-glow: 0 0 0 3px rgba(0, 123, 255, 0.2);

    --success-color: #198754;
    --error-color: #dc3545;
    --warning-color: var(--warning-accent);

    --list-item-bg: #ffffff;
    --list-item-border: #dee2e6;
    --point-group-bg: #f8f9fa;
    --point-group-border: #dee2e6;
    --point-group-hover-bg: #e9ecef;
    --point-text-bg: #f1f3f5;

    --refine-controls-bg: #f1f3f5;
    --context-info-bg: #e9ecef;
    --context-info-border: #ced4da;

    --api-status-ok-color: var(--success-color);
    --api-status-ok-border: rgba(25, 135, 84, 0.4);
    --api-status-ok-glow: 0 0 10px rgba(25, 135, 84, 0.1);
    --api-status-error-color: var(--error-color);
    --api-status-error-border: rgba(220, 53, 69, 0.4);
    --api-status-error-glow: 0 0 10px rgba(220, 53, 69, 0.1);
    --api-status-bg: rgba(255,255,255, 0.9);

    --btn-primary-color: #ffffff;
    --btn-primary-bg: var(--primary-accent);
    --btn-primary-border: var(--primary-accent);
    --btn-primary-hover-bg: #0056b3;

    --btn-success-color: #ffffff;
    --btn-success-bg: var(--success-color);
    --btn-success-border: var(--success-color);
    --btn-success-hover-bg: #218838;

    --btn-secondary-color: var(--text-secondary);
    --btn-secondary-bg: transparent;
    --btn-secondary-border: var(--secondary-accent);
    --btn-secondary-hover-bg: rgba(108, 117, 125, 0.1);
    --btn-secondary-hover-text: var(--text-primary);

    --btn-warning-color: #664d03;
    --btn-warning-bg: var(--warning-accent);
    --btn-warning-border: var(--warning-accent);
    --btn-warning-hover-bg: #e0a800;

    --btn-refine-color: var(--text-primary);
    --btn-refine-bg: rgba(108, 117, 125, 0.1);
    --btn-refine-border: rgba(108, 117, 125, 0.2);
    --btn-refine-hover-bg: rgba(108, 117, 125, 0.2);

    --btn-copy-fallback-color: #664d03;
    --btn-copy-fallback-border: #ffecb5;
    --btn-copy-fallback-bg: #fff3cd;

    --scrollbar-thumb: #ccc;
    --scrollbar-track: #f1f1f1;

    --modal-bg: #ffffff;
    --modal-header-border: #dee2e6;
    --modal-footer-border: #dee2e6;
}

body {
    padding: 40px 15px;
    background-color: var(--body-bg);
    font-family: var(--font-family-sans-serif);
    color: var(--text-primary);
    line-height: 1.6;
    min-height: 100vh;
    transition: background-color var(--transition-speed) ease;
    display: flex;
    align-items: center;
    justify-content: center;
}

/* Estilização da Scrollbar */
::-webkit-scrollbar { width: 8px; }
::-webkit-scrollbar-track { background: var(--scrollbar-track); border-radius: 10px; }
::-webkit-scrollbar-thumb { background: var(--scrollbar-thumb); border-radius: 10px; }
::-webkit-scrollbar-thumb:hover { background: #888; }
* { scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track); }

/* Container Principal da Aplicação com Efeito de Vidro Fosco Sutil */
.container {
    max-width: 900px;
    background-color: var(--container-bg);
    padding: 40px 50px;
    border-radius: var(--border-radius);
    box-shadow: var(--container-shadow);
    margin: 0 auto;
    border: 1px solid var(--container-border);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    position: relative;
    overflow: hidden;
    transition: background-color var(--transition-speed) ease, border-color var(--transition-speed) ease, box-shadow var(--transition-speed) ease;
}
.container::before { content: none; }
.container::after { content: none; }

/* Interruptor de Tema (Dark/Light Mode) */
.theme-switch-wrapper { display: flex; align-items: center; position: absolute; top: 20px; left: 25px; z-index: 10; }
.theme-switch { display: inline-block; height: 24px; position: relative; width: 48px; }
.theme-switch input { display: none; }
.slider { background-color: #ccc; bottom: 0; cursor: pointer; left: 0; position: absolute; right: 0; top: 0; transition: var(--transition-speed); border-radius: 24px; }
.slider:before { background-color: #fff; bottom: 3px; content: ""; height: 18px; left: 3px; position: absolute; transition: var(--transition-speed); width: 18px; border-radius: 50%; }
input:checked + .slider { background-color: var(--primary-accent); }
input:checked + .slider:before { transform: translateX(24px); }
.theme-switch-wrapper span { margin: 0 5px; font-size: 1rem; color: var(--text-secondary); cursor: default; }
.theme-switch-wrapper .fa-sun { color: var(--warning-accent); }
.theme-switch-wrapper .fa-moon { color: var(--text-secondary); }
body.light-mode .slider { background-color: #ccc; }
body.light-mode input:checked + .slider { background-color: var(--primary-accent); }
body.light-mode .theme-switch-wrapper span { color: var(--text-secondary); }

/* Indicador de Status da API */
.api-status { padding: 10px 15px; margin-bottom: 30px; border-radius: var(--border-radius); font-weight: 500; display: flex; align-items: center; gap: 10px; border: 1px solid; background-color: var(--api-status-bg); transition: all var(--transition-speed) ease; }
.api-status i { font-size: 1.1em; }
.api-status.status-ok { color: var(--api-status-ok-color); border-color: var(--api-status-ok-border); box-shadow: var(--api-status-ok-glow); }
.api-status.status-error { color: var(--api-status-error-color); border-color: var(--api-status-error-border); box-shadow: var(--api-status-error-glow); }
#apiStatusIndicator { display: flex; }

/* Layout de múltiplos passos */
#app-wizard {
    position: relative;
    overflow: hidden;
    min-height: 600px; /* Garante altura mínima para transições suaves */
    display: flex;
    flex-direction: column;
}
.wizard-step {
    width: 100%;
    position: absolute; /* Permite a transição horizontal */
    top: 0;
    left: 0;
    opacity: 0;
    visibility: hidden;
    transform: translateX(100%);
    transition: transform 0.4s ease-in-out, opacity 0.4s ease-in-out, visibility 0s 0.4s;
    height: 100%; /* Ocupa a altura do pai */
    overflow-y: auto; /* Scroll interno se o conteúdo for grande */
    padding-top: 15px;
    padding-bottom: 15px;
}
.wizard-step.active-step {
    position: relative; /* Volta ao fluxo normal para ser visível */
    opacity: 1;
    visibility: visible;
    transform: translateX(0);
    transition: transform 0.4s ease-in-out, opacity 0.4s ease-in-out, visibility 0s;
}
.wizard-step-title {
    color: var(--text-primary);
    font-size: 1.8rem;
    font-weight: 600;
    border-bottom: 1px solid var(--secondary-accent);
    padding-bottom: 0.5rem;
    margin-bottom: 1.5rem;
    display: flex;
    align-items: center;
    gap: 10px;
    letter-spacing: 0.5px;
}

header {
    margin-bottom: 45px;
    padding-bottom: 25px;
    border-bottom: 1px solid var(--container-border);
    text-align: center;
    position: relative;
}
header h1 {
    font-weight: 700;
    color: var(--primary-accent);
    margin: 0 auto 0.75rem auto;
    font-size: 2.5rem;
    letter-spacing: 1px;
}
header .lead {
    color: var(--text-secondary);
    font-size: 1.15rem;
    font-weight: 300;
}

#logoutBtn {
    position: absolute;
    top: -25px;
    right: -25px;
    min-width: 80px;
    padding: 6px 12px;
    font-size: 0.85rem;
}

h2, h3 { color: var(--text-primary); margin-bottom: 1.5rem; font-weight: 600; padding-bottom: 0.5rem; border-bottom: 1px solid var(--secondary-accent); display: inline-block; letter-spacing: 0; text-transform: none; }
h3 { font-size: 1.6rem; }
h4 { font-size: 1.1rem; margin-bottom: 1rem; border-bottom: none; padding-bottom: 0; color: var(--text-secondary); font-weight: 500; }

.form-label { font-weight: 500; margin-bottom: 0.8rem; display: block; color: var(--text-secondary); font-size: 0.95rem; }
.form-label strong { color: var(--text-primary); font-weight: 600; }
.form-label-sm { font-size: 0.85em; font-weight: 400; color: var(--text-secondary); opacity: 0.8; }
.small.text-muted { color: var(--text-secondary) !important; opacity: 0.7; }

textarea.form-control,
select.form-select,
input.form-control:not([type="checkbox"]):not([type="radio"]) { /* Exclui checkboxes e radios */
    min-height: 100px; /* Padrão para textareas */
    border-radius: var(--border-radius);
    border: 1px solid var(--input-border);
    background-color: var(--input-bg);
    padding: 12px 16px;
    color: var(--text-primary);
    transition: border-color var(--transition-speed) ease, box-shadow var(--transition-speed) ease, background-color var(--transition-speed) ease;
    box-shadow: inset 0 1px 2px rgba(0,0,0, 0.1);
}
/* Ajuste para inputs de linha única */
input.form-control:not([type="checkbox"]):not([type="radio"]) {
    min-height: auto;
    height: calc(1.6em + 1.6rem + 2px); /* Altura padrão para inputs */
}

body.dark-mode textarea.form-control,
body.dark-mode select.form-select,
body.dark-mode input.form-control:not([type="checkbox"]):not([type="radio"]) {
    box-shadow: inset 0 1px 2px rgba(0,0,0, 0.3);
}
textarea.form-control#originalEmail { min-height: 150px; }
textarea.form-control#generatedDraft { min-height: 200px; }
textarea.form-control#feedbackOriginalResponse { min-height: 80px; }
textarea.form-control#feedbackUserCorrection { min-height: 100px; }
textarea.form-control#feedbackUserExplanation { min-height: 70px; }

textarea.form-control:focus,
select.form-select:focus,
input.form-control:not([type="checkbox"]):not([type="radio"]):focus {
    border-color: var(--input-focus-border);
    box-shadow: var(--focus-glow);
    background-color: var(--input-bg); outline: none;
}
body.dark-mode textarea.form-control:focus,
body.dark-mode select.form-select:focus,
body.dark-mode input.form-control:not([type="checkbox"]):not([type="radio"]):focus {
    background-color: var(--input-bg);
}

select.form-select {
    min-height: auto; height: calc(1.6em + 1.6rem + 2px); appearance: none;
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='%23a0a7bd' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='m2 5 6 6 6-6'/%3e%3c/svg%3e");
    background-repeat: no-repeat; background-position: right 1rem center; background-size: 14px 10px;
}
body.light-mode select.form-select {
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='%236c757d' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='m2 5 6 6 6-6'/%3e%3c/svg%3e");
}
textarea::placeholder, input::placeholder { color: var(--text-secondary); opacity: 0.6; font-style: italic; font-weight: 300; }

.analysis-section, .draft-section { margin-top: 25px; padding-top: 25px; border-top: 1px solid var(--container-border); }

/* Estilização dos Pontos de Ação e Diretrizes */
.point-input-group {
    margin-bottom: 25px; padding: 20px 25px; background-color: var(--point-group-bg);
    border-radius: var(--border-radius); border: 1px solid var(--point-group-border);
    transition: background-color var(--transition-speed) ease, box-shadow var(--transition-speed) ease;
    position: relative;
    backdrop-filter: blur(5px);
    -webkit-backdrop-filter: blur(5px);
}
.point-input-group:hover { background-color: var(--point-group-hover-bg); box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2); }
body.dark-mode .point-input-group:hover { box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3); }
.point-input-group .form-label strong { color: var(--primary-accent); font-weight: 600; }
.point-input-group p.point-text {
    margin-bottom: 1rem; font-size: 0.95rem; color: var(--text-secondary);
    background-color: var(--point-text-bg); padding: 10px 15px; border-radius: 4px;
    border: 1px solid var(--input-border); font-style: italic;
    backdrop-filter: blur(3px);
    -webkit-backdrop-filter: blur(3px);
}
.point-input-group textarea.user-guidance { min-height: 80px; margin-top: 10px; }
.guidance-direction-group {
    margin-bottom: 1rem; padding: 10px 0; border-top: 1px dashed var(--input-border);
    border-bottom: 1px dashed var(--input-border); margin-top: 15px;
}
.guidance-direction-group .form-label-sm { margin-bottom: 0.6rem; font-weight: 500; color: var(--text-secondary); }
.guidance-direction-group .form-check-label { font-size: 0.9em; color: var(--text-secondary); cursor: pointer; transition: color var(--transition-speed) ease; }
.guidance-direction-group .form-check-label:hover { color: var(--text-primary); }
.guidance-direction-group .form-check-input { cursor: pointer; background-color: var(--input-bg); border: 1px solid var(--input-border); }
.guidance-direction-group .form-check-input:checked { background-color: var(--primary-accent); border-color: var(--primary-accent); box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.2); }
.guidance-direction-group .form-check-input:focus { box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.2); border-color: var(--primary-accent); }

/* Estilização de Botões */
.btn {
    padding: 10px 22px;
    font-weight: 600;
    border-radius: var(--border-radius);
    transition: all var(--transition-speed) ease;
    border: 1px solid;
    cursor: pointer;
    letter-spacing: 0.5px;
    position: relative;
    overflow: hidden;
    z-index: 1;
    text-transform: none;
}
.btn::before { content: none; }
.btn:hover { transform: translateY(-2px); box-shadow: 0 4px 10px rgba(0,0,0,0.2); }
.btn:focus { outline: none; }
.btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    color: var(--text-secondary) !important;
    border-color: var(--text-secondary) !important;
    box-shadow: none !important;
    transform: none !important;
}
.btn:disabled::before { width: 0; left: -100%; }
.btn:disabled:hover { color: var(--text-secondary) !important; }

.btn-primary { color: var(--btn-primary-color); background-color: var(--btn-primary-bg); border-color: var(--btn-primary-border); }
.btn-primary:hover { background-color: var(--btn-primary-hover-bg); }
.btn-primary:focus { box-shadow: var(--focus-glow); }

.btn-google {
    color: #db4437; background-color: transparent; border-color: #db4437;
    font-size: 1rem; padding: 12px 25px;
}
.btn-google:hover { color: white; background-color: #db4437; }
.btn-google:focus { box-shadow: 0 0 0 2px rgba(219, 68, 55, 0.3); }

.btn-success { color: var(--btn-success-color); background-color: var(--btn-success-bg); border-color: var(--btn-success-border); }
.btn-success:hover { background-color: var(--btn-success-hover-bg); }
.btn-success:focus { box-shadow: 0 0 0 2px rgba(40, 167, 69, 0.3); }

.btn-secondary { color: var(--btn-secondary-color); background-color: var(--btn-secondary-bg); border-color: var(--btn-secondary-border); }
.btn-secondary:hover { background-color: var(--btn-secondary-hover-bg); color: var(--btn-secondary-hover-text); }
.btn-secondary:focus { box-shadow: 0 0 0 2px rgba(108, 117, 125, 0.2); }

.btn-warning { color: var(--btn-warning-color); background-color: var(--btn-warning-bg); border-color: var(--warning-accent); }
.btn-warning:hover { background-color: var(--btn-warning-hover-bg); }
.btn-warning:focus { box-shadow: 0 0 0 2px rgba(255, 193, 7, 0.3); }

.btn-danger { color: #fff; background-color: #dc3545; border-color: #dc3545; }
.btn-danger:hover { background-color: #c82333; border-color: #bd2130; }
.btn-danger:focus { box-shadow: 0 0 0 0.2rem rgba(220, 53, 69, 0.5); }


.btn-send-email {
    color: var(--success-color);
    background-color: transparent;
    border-color: var(--success-color);
}
.btn-send-email:hover {
    color: white;
    background-color: var(--success-color);
}
.btn-send-email:focus {
    box-shadow: 0 0 0 2px rgba(40, 167, 69, 0.3);
}

.btn-outline-secondary.suggest-btn {
    color: var(--btn-secondary-color); border-color: var(--btn-secondary-border); background-color: transparent;
    font-size: 0.8rem; padding: 0.3rem 0.8rem; box-shadow: none; margin-left: auto;
    letter-spacing: 0.2px; font-weight: 500; text-transform: none;
}
.btn-outline-secondary.suggest-btn:hover { background-color: var(--btn-secondary-hover-bg); color: var(--btn-secondary-hover-text); transform: none; box-shadow: none; }
.btn-outline-secondary.suggest-btn:disabled { color: var(--text-secondary); border-color: var(--text-secondary); opacity: 0.5; }

#copyDraftBtn.btn-success { color: var(--btn-success-color); border-color: var(--btn-success-border); background-color: rgba(40, 167, 69, 0.1); }
#copyDraftBtn.btn-warning { color: var(--btn-copy-fallback-color); border-color: var(--btn-copy-fallback-border); background-color: var(--btn-copy-fallback-bg); }
#copyDraftBtn.btn-success:hover, #copyDraftBtn.btn-warning:hover { transform: none; box-shadow: none; }

/* Spinners de Carregamento */
.loading-spinner { display: none; width: 1em; height: 1em; vertical-align: -0.125em; margin-left: 8px; color: inherit; }
.btn-sm .loading-spinner, .refine-btn .loading-spinner { width: 0.8em; height: 0.8em; margin-left: 5px; }
.btn-outline-secondary .loading-spinner { color: var(--btn-secondary-color); }
.btn-outline-secondary:hover .loading-spinner { color: var(--btn-secondary-hover-text); }
#fetchEmailsBtn .loading-spinner { color: var(--btn-primary-bg); }
#fetchEmailsBtn:hover .loading-spinner { color: var(--btn-primary-color); }


/* Mensagens de Erro */
.error-message {
    color: var(--error-color); font-weight: 500; margin-top: 15px; font-size: 0.9rem; display: none;
    background-color: rgba(220, 53, 69, 0.1); padding: 12px 18px; border-radius: var(--border-radius);
    border: 1px solid var(--api-status-error-border); box-shadow: var(--api-status-error-glow);
    backdrop-filter: blur(5px); -webkit-backdrop-filter: blur(5px);
}
body.light-mode .error-message { background-color: #f8d7da; border-color: #f5c2c7; box-shadow: none; }
.error-message i { margin-right: 8px; }

.is-invalid { border-color: var(--error-color) !important; }
.is-invalid:focus { box-shadow: 0 0 0 2px rgba(220, 53, 69, 0.2) !important; }
body.light-mode .is-invalid:focus { box-shadow: 0 0 0 2px rgba(220, 53, 69, 0.2) !important; }
.invalid-feedback { color: var(--error-color); font-weight: 500; }

/* Controles de Refinamento de Texto */
#refinementControls {
    margin-top: 25px; padding: 15px 20px; background-color: var(--refine-controls-bg);
    border-radius: var(--border-radius); border: 1px solid var(--input-border);
    display: none; flex-wrap: wrap; gap: 8px;
    backdrop-filter: blur(8px); -webkit-backdrop-filter: blur(8px);
}
#refinementControls .text-muted {
    width: 100%; margin-bottom: 8px; font-size: 0.85rem; font-weight: 500;
    color: var(--text-secondary); text-transform: uppercase; letter-spacing: 0.5px;
}
.refine-btn {
    font-size: 0.8rem; padding: 6px 12px; display: inline-flex; align-items: center;
    background-color: var(--btn-refine-bg); color: var(--btn-refine-color); border: 1px solid var(--btn-refine-border);
    box-shadow: none; font-weight: 500; transition: all var(--transition-speed) ease;
    text-transform: none; letter-spacing: 0.2px;
}
.refine-btn:hover {
    background-color: var(--btn-refine-hover-bg); color: var(--btn-refine-color); border-color: var(--btn-refine-border);
    transform: none; box-shadow: none;
}
.refine-btn .loading-spinner { color: inherit; }
.refine-btn:disabled { color: var(--text-secondary); border-color: var(--text-secondary); opacity: 0.5; box-shadow: none; }
.refine-btn:disabled:hover { background-color: transparent; color: var(--text-secondary); }

/* Metadados de Contexto */
#contextInfo {
    text-align: right; padding: 10px 15px; background-color: var(--context-info-bg);
    border-radius: 4px; border: 1px solid var(--context-info-border);
    font-size: 0.85rem; color: var(--text-secondary);
    backdrop-filter: blur(5px); -webkit-backdrop-filter: blur(5px);
}
#contextInfo strong { font-weight: 600; color: var(--text-primary); }

/* Lista de Grupo Padrão */
.list-group { border-radius: var(--border-radius); overflow: hidden; }
.list-group-item {
    background-color: var(--list-item-bg); border-color: var(--list-item-border);
    color: var(--text-primary); padding: 12px 20px;
}
.list-group-numbered > .list-group-item::before { color: var(--primary-accent); font-weight: bold; }

/* Otimização e Estilização da Lista de Emails do Gmail */
#emailList {
    max-height: 300px;
    overflow-y: auto;
    background: var(--bg-tertiary);
    border-radius: var(--border-radius);
    border: 1px solid var(--container-border);
    padding: 8px 0;
}
#emailList .list-group-item {
    background-color: transparent;
    border-left: 3px solid transparent;
    border-right: none;
    border-top: 1px solid var(--list-item-border);
    border-bottom: 1px solid var(--list-item-border);
    margin-bottom: -1px;
    padding: 12px 20px;
    cursor: pointer;
    transition: all 0.2s ease;
}
#emailList .list-group-item:first-child { border-top: none; }
#emailList .list-group-item:last-child { border-bottom: none; }

.email-list-item:hover {
    background-color: rgba(50, 50, 50, 0.4);
    border-left-color: var(--primary-accent);
}
.email-sender {
    font-weight: 600; color: var(--text-primary); font-size: 0.95rem; margin-bottom: 2px; display: flex; align-items: center; gap: 8px;
}
.email-subject {
    font-weight: 500; color: var(--text-primary); opacity: 0.9; font-size: 0.9rem; margin-bottom: 4px;
}
.email-snippet {
    font-weight: 300; font-size: 0.8rem; color: var(--text-secondary); opacity: 0.8; line-height: 1.4;
}

/* Estilos para Modais */
.modal-content {
    background-color: var(--modal-bg);
    color: var(--text-primary);
    border: 1px solid var(--container-border);
    border-radius: var(--border-radius);
    box-shadow: var(--container-shadow);
    backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);
}
.modal-header { border-bottom: 1px solid var(--modal-header-border); padding: 1.2rem; }
.modal-header .btn-close { filter: invert(1) grayscale(100%); }
body.light-mode .modal-header .btn-close { filter: none; }
.modal-footer { border-top: 1px solid var(--modal-footer-border); padding: 1.2rem; }
.modal-body .form-label { color: var(--text-secondary); }
.modal-body textarea, .modal-body select, .modal-body input:not([type="checkbox"]):not([type="radio"]) { /* Adicionado input */
    background-color: var(--input-bg); color: var(--text-primary); border: 1px solid var(--input-border);
}
.modal-body textarea:focus, .modal-body select:focus, .modal-body input:not([type="checkbox"]):not([type="radio"]):focus { /* Adicionado input */
    border-color: var(--input-focus-border); box-shadow: var(--focus-glow); background-color: var(--input-bg);
}

/* Responsividade */
@media (max-width: 992px) {
    .container { padding: 30px 40px; }
    header h1 { font-size: 1.8rem; }
    .wizard-step-title { font-size: 1.6rem; }
}
@media (max-width: 768px) {
    body { padding: 25px 10px; align-items: flex-start; }
    .container { padding: 25px; margin: 0 auto; }
    header { flex-wrap: wrap; }
    header h1 { order: 1; width: 100%; text-align: center; font-size: 1.6rem; }
    header .lead { order: 2; position: static; text-align: center; margin-top: 10px; }
    #logoutBtn { order: 3; position: static; width: 100%; margin-top: 15px; }
    .point-input-group { padding: 20px; }
    .btn { padding: 8px 18px; font-size: 0.9rem; }
    #refinementControls { padding: 12px; gap: 6px; }
    .refine-btn { font-size: 0.75rem; padding: 5px 10px; }
    .draft-section .d-flex.justify-content-between { flex-direction: column; align-items: flex-start !important; gap: 15px; }
    #contextInfo { text-align: left; width: 100%; }
    .wizard-step-title { flex-direction: column; align-items: flex-start; text-align: left; }
    .wizard-step-title i { margin-bottom: 8px; }
}
@media (max-width: 576px) {
    .container { padding: 20px 15px; }
    header h1 { font-size: 1.5rem; }
    .point-input-group .d-flex { flex-direction: column; align-items: flex-start !important; gap: 8px; }
    .btn-outline-secondary.suggest-btn { margin-left: 0; }
    .btn { width: 100%; }
    .draft-section .d-flex.justify-content-between > .btn-group { width: 100%; }
    .draft-section .d-flex.justify-content-between > .btn-group > .btn { width: auto; flex-grow: 1; }
    #contextInfo { margin-left: 0 !important; }
    .theme-switch-wrapper { top: 10px; left: 10px; }
    .theme-switch-wrapper span { display: none; }
}

/* Estilos para o assistente de passos */
#app-wizard {
    position: relative;
    overflow: hidden;
    min-height: 600px;
    display: flex;
    flex-direction: column;
    padding-top: 20px;
}
.wizard-step {
    width: 100%;
    position: absolute;
    top: 0;
    left: 0;
    opacity: 0;
    visibility: hidden;
    transform: translateX(100%);
    transition: transform 0.4s ease-in-out, opacity 0.4s ease-in-out, visibility 0s 0.4s;
    height: 100%;
    overflow-y: auto;
    padding-bottom: 20px;
}
.wizard-step.active-step {
    position: relative;
    opacity: 1;
    visibility: visible;
    transform: translateX(0);
    transition: transform 0.4s ease-in-out, opacity 0.4s ease-in-out, visibility 0s;
}
.wizard-step-title {
    color: var(--primary-accent);
    font-size: 1.8rem;
    font-weight: 700;
    border-bottom: 2px solid var(--secondary-accent);
    padding-bottom: 0.8rem;
    margin-bottom: 2rem;
    display: flex;
    align-items: center;
    gap: 15px;
    letter-spacing: 0.5px;
    text-transform: none;
}
.wizard-step-title i {
    font-size: 1.5em;
    color: var(--secondary-accent);
}

/* Barra de progresso visual */
.progress-indicator {
    display: flex;
    justify-content: space-between;
    margin-bottom: 30px;
    padding: 10px 0;
    position: relative;
}
.progress-indicator::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 0;
    right: 0;
    height: 2px;
    background: rgba(255, 255, 255, 0.1);
    transform: translateY(-50%);
    z-index: 0;
}
.progress-step {
    flex: 1;
    text-align: center;
    position: relative;
    z-index: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    cursor: pointer;
    opacity: 0.6;
    transition: opacity 0.3s ease;
}
.progress-step.active, .progress-step.completed {
    opacity: 1;
}
.progress-step-circle {
    width: 28px;
    height: 28px;
    border-radius: 50%;
    background: var(--bg-tertiary);
    border: 2px solid var(--secondary-accent);
    color: var(--secondary-accent);
    display: flex;
    justify-content: center;
    align-items: center;
    font-weight: bold;
    font-size: 1rem;
    transition: all 0.3s ease;
    margin-bottom: 8px;
}
.progress-step.active .progress-step-circle {
    background: var(--primary-accent);
    border-color: var(--primary-accent);
    color: var(--text-dark);
    box-shadow: 0 0 8px rgba(0, 123, 255, 0.3);
    transform: scale(1.1);
}
.progress-step.completed .progress-step-circle {
    background: var(--success-color);
    border-color: var(--success-color);
    color: var(--text-dark);
    box-shadow: 0 0 6px rgba(40, 167, 69, 0.2);
}
.progress-step-label {
    font-size: 0.85rem;
    color: var(--text-secondary);
    font-weight: 500;
    transition: color 0.3s ease;
}
.progress-step.active .progress-step-label,
.progress-step.completed .progress-step-label {
    color: var(--text-primary);
}

/* Estilos para a Tabela de Personas */
.persona-table {
    width: 100%;
    border-collapse: separate;
    border-spacing: 0;
    border-radius: var(--border-radius);
    overflow: hidden; /* Garante que o border-radius seja aplicado */
    background-color: var(--bg-tertiary);
    border: 1px solid var(--container-border);
}

.persona-table th, .persona-table td {
    padding: 12px 15px;
    text-align: left;
    border-bottom: 1px solid var(--list-item-border);
    color: var(--text-primary);
}

.persona-table th {
    background-color: rgba(0, 123, 255, 0.1); /* Um toque de cor da accent */
    color: var(--primary-accent);
    font-weight: 600;
    font-size: 0.9rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.persona-table tbody tr {
    transition: background-color 0.2s ease;
}

.persona-table tbody tr:hover {
    background-color: rgba(50, 50, 50, 0.4); /* Mais escuro no hover */
}

.persona-table tbody tr:last-child td {
    border-bottom: none;
}

.persona-actions .btn {
    padding: 5px 10px;
    font-size: 0.8rem;
    margin-right: 5px;
}

/* Estilo para os grupos de Few-shot Examples no modal */
.few-shot-example-group {
    background-color: var(--point-group-bg); /* Reutiliza o estilo de grupo de input */
    border: 1px solid var(--point-group-border);
    padding: 15px;
    border-radius: var(--border-radius);
    margin-bottom: 15px;
}
.few-shot-example-group textarea {
    min-height: 60px; /* Menor altura para os exemplos */
}